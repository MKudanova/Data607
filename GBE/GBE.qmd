---
title: "Global Baseline Estimate"
author: "Madina Kudanova"
format: html
editor: visual
---

## Introduction

The goal of this assignment is to implement a Global Baseline Estimate recommendation system in R using the movie rating data collected earlier in the course. The Global Baseline Estimate is a non-personalized recommender approach that predicts ratings based on the overall average rating, along with systematic deviations associated with individual users and individual movies.

Using the provided survey dataset ([Movie Ratings XLSX](https://brightspace.cuny.edu/content/enforced/1154240-SPS01_DATA_607_1262_1_32167/MovieRatings.xlsx?ou=1154240)), I will construct a reproducible workflow that calculates these components and generates predicted ratings. This implementation serves as a foundational benchmark model that can be compared to more advanced personalized recommendation techniques in future work.

## Approach

To implement the Global Baseline Estimate recommender system, I will begin by preparing the movie ratings dataset in a tidy, structured format suitable for analysis in R. If necessary, I will reshape the data so that each row represents a single user–movie rating pair. This ensures the dataset follows a consistent rectangular structure and supports grouped calculations.

Next, I will compute the overall mean rating across all observations. This value serves as the global baseline estimate. From there, I will calculate user-specific bias terms (how each user tends to rate relative to the global average) and movie-specific bias terms (how each movie tends to deviate from the global average). These components will be combined to generate predicted ratings for each user–movie pair.

After generating predicted values, I will review the results to confirm that predictions are logically consistent and reflect the structure of the algorithm described in the provided implementation spreadsheet. I will also validate that missing ratings are handled appropriately and that calculations are reproducible.

## Anticipated Challenges

The dataset may contain missing ratings that must be handled carefully.

I might need to perform data reformatting.

Users with very few ratings may produce unstable bias estimates.

Ensuring that bias calculations are performed correctly without data leakage or double counting.

I will address these challenges through careful data inspection, validation checks, and step-by-step calculation of each model component.

## Code Base

```{r}
# Reading and loading the Excel dataset
library(readxl)
library(tidyverse)

movie_ratings <- read_excel("MovieRatings.xlsx")
glimpse(movie_ratings)

```

```{r}
 # Reshaping dataset to long format so each row represents one user–movie rating pair
ratings_long <- movie_ratings %>%
  pivot_longer(
    cols = -Critic,
    names_to = "movie",
    values_to = "rating"  )
glimpse(ratings_long)

```

```{r}
# Calculating global average rating
global_avg <- mean(ratings_long$rating, na.rm = TRUE)

global_avg
```

```{r}
# Calculating average rating for each movie
movie_avg <- ratings_long %>%
  group_by(movie) %>%
  summarise(movie_avg = mean(rating, na.rm = TRUE), .groups = "drop")

movie_avg

```

```{r}
# Calculating average rating for each user
user_avg <- ratings_long %>%
  group_by(Critic) %>%
  summarise(user_avg = mean(rating, na.rm = TRUE), .groups = "drop")

user_avg

```

```{r}
# Calculating movie bias as deviation from global average
# (movie_avg - global_avg) — matches spreadsheet row "movie avg - mean movie"
movie_bias <- movie_avg %>%
  mutate(movie_bias = movie_avg - global_avg)
movie_bias
```

```{r}
# Calculating user bias as deviation from global average
# (user_avg - global_avg) — matches spreadsheet column "user avg - mean movie"
user_bias <- user_avg %>%
  mutate(user_bias = user_avg - global_avg)
user_bias
```

```{r}
# Calculating predicted rating using spreadsheet formula:
# prediction = global_avg + movie_bias + user_bias
# Join biases back to full ratings table
predictions <- ratings_long %>%
  left_join(movie_bias %>% select(movie, movie_bias), by = "movie") %>%
  left_join(user_bias %>% select(Critic, user_bias), by = "Critic") %>%
  mutate(
    prediction = global_avg + movie_bias + user_bias
  )

predictions

```

```{r}
# Recommending the single highest-predicted unrated movie for each user
recommendations_top1 <- predictions %>%
  filter(is.na(rating)) %>%
  group_by(Critic) %>%
  slice_max(prediction, n = 1, with_ties = FALSE) %>%
  arrange(Critic)

recommendations_top1

```

## Conclusion

In this analysis, I implemented a Global Baseline Estimate recommender system using the collected movie ratings dataset. The model predicts missing ratings by combining the overall average rating with user-specific and movie-specific deviations, following the implementation structure provided in the spreadsheet. Based on these predicted values, one movie recommendation was generated for each user. Although this approach does not use advanced personalized algorithms, it provides a clear and interpretable baseline model that can serve as a benchmark for more sophisticated recommendation systems.
